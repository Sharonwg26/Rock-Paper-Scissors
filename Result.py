# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'Result.ui'
#
# Created by: PyQt5 UI code generator 5.15.6
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets,QtTest
from Client_net import Network
#from Play import Ui_choose

class Ui_result(object):

    def __init__(self,name,net,game,player,choose):
        super(Ui_result, self).__init__()
        self.result_Form = QtWidgets.QWidget()
        self.result_Form.setObjectName("result")
        self.result_Form.resize(640, 640)
        self.name = name
        self.net = net
        self.game = game
        self.player = player
        self.choose = choose

        palette = QtGui.QPalette()
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 237, 225))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(251, 199, 165))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(124, 81, 52))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(165, 108, 70))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(251, 208, 180))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 237, 225))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(251, 199, 165))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(124, 81, 52))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(165, 108, 70))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(251, 208, 180))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipText, brush)
        brush = QtGui.QBrush(QtGui.QColor(124, 81, 52))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 237, 225))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(251, 199, 165))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(124, 81, 52))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(165, 108, 70))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(124, 81, 52))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(124, 81, 52))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(248, 162, 105))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipText, brush)
        self.result_Form.setPalette(palette)

        self.title = QtWidgets.QLabel(self.result_Form)
        self.title.setGeometry(QtCore.QRect(20, 10, 600, 150))
        font = QtGui.QFont()
        font.setPointSize(32)
        font.setFamily("Comic Sans MS")
        font.setBold(True)
        self.title.setFont(font)
        self.title.setAlignment(QtCore.Qt.AlignCenter)
        self.title.setObjectName("title")

        self.Name_data = QtWidgets.QLabel(self.result_Form)
        self.Name_data.setGeometry(QtCore.QRect(170, 180, 240, 60))
        self.Name_data.setText(self.name)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setBold(True)
        font.setPointSize(24)
        self.Name_data.setFont(font)
        self.Name_data.setContextMenuPolicy(QtCore.Qt.ActionsContextMenu)
        self.Name_data.setTextFormat(QtCore.Qt.AutoText)
        self.Name_data.setAlignment(QtCore.Qt.AlignCenter)
        self.Name_data.setObjectName("Name_data")

        self.result_data = QtWidgets.QLabel(self.result_Form)
        self.result_data.setGeometry(QtCore.QRect(40, 200, 481, 81))
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(36)
        font.setBold(True)
        font.setItalic(True)
        font.setWeight(75)
        self.result_data.setFont(font)
        self.result_data.setAlignment(QtCore.Qt.AlignCenter)
        self.result_data.setObjectName("result_data")

        self.You_text = QtWidgets.QLabel(self.result_Form)
        self.You_text.setGeometry(QtCore.QRect(70, 300, 191, 51))
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(20)
        self.You_text.setFont(font)
        self.You_text.setAlignment(QtCore.Qt.AlignCenter)
        self.You_text.setObjectName("You_text")

        self.You_data = QtWidgets.QLabel(self.result_Form)
        self.You_data.setGeometry(QtCore.QRect(0, 350, 291, 251))
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(20)
        self.You_data.setFont(font)
        self.You_data.setText("")
        self.You_data.setPixmap(QtGui.QPixmap("image/"+self.choose+".png"))
        self.You_data.setAlignment(QtCore.Qt.AlignCenter)
        self.You_data.setObjectName("You_data")

        self.Enemy_text = QtWidgets.QLabel(self.result_Form)
        self.Enemy_text.setGeometry(QtCore.QRect(310, 300, 251, 81))
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(20)
        self.Enemy_text.setFont(font)
        self.Enemy_text.setAlignment(QtCore.Qt.AlignCenter)
        self.Enemy_text.setObjectName("Enemy_text")

        self.Enemy_data = QtWidgets.QLabel(self.result_Form)
        self.Enemy_data.setGeometry(QtCore.QRect(240, 350, 391, 261))
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(20)
        self.Enemy_data.setFont(font)
        self.Enemy_data.setText("Waiting...")
        self.Enemy_data.setAlignment(QtCore.Qt.AlignCenter)
        self.Enemy_data.setObjectName("Enemy_data")

        self.retranslateUi(self.result_Form)
        QtCore.QMetaObject.connectSlotsByName(self.result_Form)

    def retranslateUi(self, result):
        _translate = QtCore.QCoreApplication.translate
        result.setWindowTitle(_translate("result", "Rock-Paper-Scissors"))
        self.title.setText(_translate("result", "Rock-Paper-Scissors"))
        self.Enemy_text.setText(_translate("result", "Enemy"))
        self.You_text.setText(_translate("result", "You"))

    def wait_other_choose(self):
        if self.game.bothWent():
            self.res_from()
            return 1
        else:
            if  self.player == 0 and not(self.game.p2Went):
                self.You_data.setText("Locked In")
                self.Enemy_data.setText("Waiting...")
                self.result_Form.show()
                QtTest.QTest.qWait(5000)
                return 0
                #self.You_data.setPixmap(QtGui.QPixmap("image/"+self.move1+".png"))
            if self.player == 1 and not(self.game.p1Went):
                self.You_data.setText("Locked In")
                self.Enemy_data.setText("Waiting...")
                self.result_Form.show()
                QtTest.QTest.qWait(5000)
                return 0
                #self.Enemy_data.setPixmap(QtGui.QPixmap("image/"+self.move2+".png"))
                
    
        
    def res_from(self):
        self.game = self.net.send("get")
        self.Name_data.setText("")
        if self.game.p1Went and self.player == 0:
            self.You_data.setPixmap(QtGui.QPixmap("image/"+self.move1+".png"))
            self.Enemy_data.setPixmap(QtGui.QPixmap("image/"+self.move2+".png"))
        else:
            self.You_data.setPixmap(QtGui.QPixmap("image/"+self.move2+".png"))
            self.Enemy_data.setPixmap(QtGui.QPixmap("image/"+self.move1+".png"))

        if (self.game.winner() == 1 and self.player == 1) or (self.game.winner() == 0 and self.player == 0):
            self.result_data.setText("You Won!")
        elif self.game.winner() == -1:
            self.result_data.setText("Tie Game!")
        else:
            self.result_data.setText("You Lost...")
        self.result_Form.show()
        QtTest.QTest.qWait(3000)
        #self.reset()
        


    def window_show(self):
        run = True
        while run:
            self.game = self.net.send("get")
            self.move1 = self.game.get_player_move(0)
            self.move2 = self.game.get_player_move(1)
            print("move1:",self.game.p1Went,self.move1,"\tmove2",self.game.p2Went,self.move2)
            if self.wait_other_choose() == 1:
               run = False
               break
            else:
                continue
            
        QtTest.QTest.qWait(5000)

        
    """def reset(self):
        if self.game.bothWent():
            self.game = self.net.send("reset")
            self.result_Form.hide()
            self.choose_Form = Ui_choose(self.name,self.net,self.game,self.player)
            self.choose_Form.window_show()
            print("Ui_choose ok")
    """
